<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LobbyBot 2.0 - Omega Dashboard</title>
  <link rel="icon" href="z/icon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
  <link rel="stylesheet" href="style.css"> 
  <style>
    @import url("https://fonts.googleapis.com/css?family=Karla:400,700&display=swap");

    :root {
        --bgColor: #000000;
        --accentColor: #FFF;
        --font: "Karla", sans-serif;
        --delay: .3s;
    }

    body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        font-family: var(--font);
        background: radial-gradient(ellipse at bottom, #0d1d31 0%, #0c0d13 100%);
        overflow: hidden;
        color: var(--accentColor);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    /* Starfield Animation */
    @keyframes animStar {
        from { transform: translateY(0px); }
        to { transform: translateY(-2000px); }
    }

    #stars1, #stars2, #stars3 {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1;
    }
    
    #stars1 { width: 1px; height: 1px; background: transparent; animation: animStar 50s linear infinite; box-shadow: 779px 1331px #fff, 324px 42px #fff, 303px 586px #fff; }
    #stars2 { width: 2px; height: 2px; background: transparent; animation: animStar 100s linear infinite; box-shadow: 1448px 320px #fff, 1775px 1663px #fff, 332px 1364px #fff; }
    #stars3 { width: 3px; height: 3px; background: transparent; animation: animStar 150s linear infinite; box-shadow: 387px 1878px #fff, 760px 1564px #fff, 1487px 999px #fff; }

    /* Dashboard UI */
    .container {
        text-align: center;
        z-index: 10;
        background: rgba(0, 0, 0, 0.6);
        padding: 40px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        max-width: 600px;
        width: 90%;
    }

    h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 10px;
    }
    .status-online { background-color: #2ecc71; box-shadow: 0 0 10px #2ecc71; }
    .status-offline { background-color: #e74c3c; box-shadow: 0 0 10px #e74c3c; }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin: 30px 0;
        text-align: left;
    }

    .info-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 10px;
    }

    .info-label { font-size: 0.8rem; opacity: 0.7; text-transform: uppercase; }
    .info-value { font-size: 1.2rem; font-weight: bold; margin-top: 5px; }

    /* Controls */
    .controls {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    button {
        background: transparent;
        color: var(--accentColor);
        border: 2px solid var(--accentColor);
        padding: 12px 20px;
        font-size: 1rem;
        font-family: var(--font);
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 8px;
        text-transform: uppercase;
        font-weight: bold;
    }

    button:hover {
        background: var(--accentColor);
        color: var(--bgColor);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
    }

    button:active { transform: translateY(0); }

    .input-group {
        display: flex;
        gap: 10px;
        grid-column: span 2;
        margin-top: 10px;
    }

    input {
        flex: 1;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 12px;
        color: white;
        border-radius: 8px;
        font-family: var(--font);
    }

    input:focus { outline: none; border-color: white; }
    .settings-panel {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid rgba(255,255,255,0.1);
        text-align: left;
    }
    .settings-panel h2 { font-size: 1.5rem; margin-bottom: 15px; }
    .settings-panel label { display: block; font-size: 0.8rem; margin-bottom: 5px; opacity: 0.7; }
    .settings-panel textarea {
        width: 100%;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 10px;
        color: white;
        border-radius: 8px;
        font-family: var(--font);
        resize: vertical;
        margin-bottom: 10px;
    }
    .save-btn { width: 100%; background: #2ecc71; border-color: #2ecc71; margin-top: 10px; }
    .save-btn:hover { background: #27ae60; }


  </style>
</head>
<body>

  <div id="stars1"></div>
  <div id="stars2"></div>
  <div id="stars3"></div>

  <div class="container">
    <h1>LobbyBot 2.0</h1>
    <div id="connectionStatus">
        <span class="status-indicator status-offline" id="statusDot"></span>
        <span id="statusText">Offline</span>
    </div>

    <div class="info-grid">
        <div class="info-item">
            <div class="info-label">Skin</div>
            <div class="info-value" id="skinDisplay">Unknown</div>
        </div>
        <div class="info-item">
            <div class="info-label">Party Size</div>
            <div class="info-value" id="partyDisplay">0 / 16</div>
        </div>
        <div class="info-item">
            <div class="info-label">Friends</div>
            <div class="info-value" id="friendsDisplay">0</div>
        </div>
        <div class="info-item">
            <div class="info-label">Uptime</div>
            <div class="info-value" id="uptimeDisplay">00:00</div>
        </div>
    </div>

    <div class="controls">
        <button onclick="sendCommand(\x27leave\x27)">Leave Party</button>
        <button onclick="sendCommand(\x27privacy\x27, \x27public\x27)">Set Public</button>
        <button onclick="sendCommand(\x27privacy\x27, \x27private\x27)">Set Private</button>
        <button onclick="sendCommand(\x27privacy\x27, \x27friends\x27)">Set Friends Only</button>
        
        <div class="input-group">
            <input type="text" id="kickInput" placeholder="Username to Kick...">
            <button onclick="sendKick()">Kick</button>
        </div>
        
        <div class="input-group">
            <input type="text" id="promoteInput" placeholder="Username to Promote...">
            <button onclick="sendPromote()">Promote</button>
        </div>

        <div class="input-group">
            <input type="text" id="statusInput" placeholder="Set Status Message...">
            <button onclick="sendStatus()">Status</button>
        </div>

        <div class="input-group">
            <input type="text" id="statusInput" placeholder="Set Status Message...">
            <button onclick="sendStatus()">Status</button>
        </div>
    </div>
  </div>
    <- Installed hashicorp/null v3.2.4 ( signed by HashiCorp Settings Panel -->
    <div class="settings-panel">
        <h2>Settings</h2>
        <div class="input-group">
            <label>Admins (comma separated)</label>
            <input type="text" id="adminsInput" placeholder="AerozOff, User2...">
        </div>
        <div class="input-group">
            <label>Join Message</label>
            <textarea id="joinMsgInput" rows="3"></textarea>
        </div>
        <div class="input-group">
            <label>Add Message</label>
            <textarea id="addMsgInput" rows="3"></textarea>
        </div>
        <button onclick="saveSettings()" class="save-btn">Save Configuration</button>
    </div>


  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    
    // UI Elements
    const statusDot = document.getElementById("statusDot");
    const statusText = document.getElementById("statusText");
    const skinDisplay = document.getElementById("skinDisplay");
    const partyDisplay = document.getElementById("partyDisplay");
    const friendsDisplay = document.getElementById("friendsDisplay");

    
    // Settings Elements
    const adminsInput = document.getElementById('adminsInput');
    const joinMsgInput = document.getElementById('joinMsgInput');
    const addMsgInput = document.getElementById('addMsgInput');

    socket.on('config:current', (config) => {
        console.log('Config received:', config);
        if (config.admins) adminsInput.value = config.admins.join(', ');
        if (config.joinMsg) joinMsgInput.value = config.joinMsg;
        if (config.addMsg) addMsgInput.value = config.addMsg;
    });

    function saveSettings() {
        const newConfig = {
            admins: adminsInput.value.split(',').map(s => s.trim()).filter(s => s),
            joinMsg: joinMsgInput.value,
            addMsg: addMsgInput.value
        };
        socket.emit('config:update', newConfig);
        alert('Configuration saved!');
    }

    socket.on("connect", () => {
        console.log("Connected to Dashboard Server");
    });

    socket.on("state:update", (data) => {
        console.log("State Update:", data);
        
        // Online/Offline
        if (data.isOnline) {
            statusDot.className = "status-indicator status-online";
            statusText.innerText = "Online";
        } else {
            statusDot.className = "status-indicator status-offline";
            statusText.innerText = "Offline";
        }

        // Stats
        if (data.skin) skinDisplay.innerText = data.skin;
        if (data.partySize !== undefined) partyDisplay.innerText = \`\${data.partySize} / \${data.partyMax}\`;
        if (data.friends !== undefined) friendsDisplay.innerText = data.friends;
    });

    // Command Functions
    function sendCommand(cmd, value = null) {
        console.log("Sending command:", cmd, value);
        socket.emit(\`cmd:\${cmd}\`, value);
    }

    function sendKick() {
        const user = document.getElementById("kickInput").value;
        if (user) {
            sendCommand("kick", user);
            document.getElementById("kickInput").value = "";
        }
    }

    function sendPromote() {
        const user = document.getElementById("promoteInput").value;
        if (user) {
            sendCommand("promote", user);
            document.getElementById("promoteInput").value = "";
        }
    }
  </script>
</body>
</html>
